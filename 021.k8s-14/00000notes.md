# Lecture-14

>Note: remember we used ubuntu machine to create cluster so username is ubuntu only

### create cluster command

`
eksctl create cluster --name ashokit-cluster4 --region ap-south-1 --node-type t2.medium --zones ap-south-1a,ap-south-1b`

>Note: It takes time to start

### delete cluster command

`eksctl delete cluster --name ashokit-cluster4 --region ap-south-1
`


- to delete all the resources(pods,services all) we have created
        
        $ kubectl delete all --all

 - to get everything in any namespace

        $ kubectl get all  -n <namespace-name> 

- to execute manifest yml

        $ kubectl apply -f <yml-file>

- get all namespace

        $ kubectl get ns  


 ## Lecture started       

### Reading Data From ConfigMap

```yml
- name: DB_DRIVER
  valueFrom:
   configMapKeyRef:
    name: ashokit-config-map
    key: DB_DRIVER
```


### Reading Data From Secret  

```yml
- name: DB_PASSWORD
  valueFrom:
   secretKeyRef:
     name: ashokit-secret
     key: DB_PASSWORD
```     

### Spring Boot with MYSQL DB Deployment 


=> In this project we will use below k8s resources

1) ConfigMap
2) Secret
3) PV 
4) PVC
5) StatefulSet--> to get data even pod is recreated!
6) Deployment --> for application deployment

![alt text](image.png)

first we deploy ConfigMapManifest

Then Secret Manifest

Then DB deployment

Then Application deployment

and after that application will coomunicate with DB!!

 Git Hub Repo : https://github.com/ashokitschool/kubernetes_manifest_yml_files.git 

OR We have this folder k8s-yml-files
1) Create Config Map

        $ kubectl apply -f <yml>
        $ kubectl get cm


2) Create Secret

        $ kubectl apply -f <yml>
        $ kubectl get secret

3) Create PV

        $ kubectl apply -f <yml>
        $ kubectl get pv

4) Create PVC

        $ kubectl apply -f <yml>
        $ kubectl get pvc

5) Create DB Deployment

        $ kubectl apply -f <yml>
        $ kubectl get pods
        $ kubectl get svc
> Note : We can check mysql db is running in the pod or not 

        $ kubectl exec -it <db-pod-name> bash
        $ mysql -h localhost -u root -p
        $ show databases;

- Exit from database : $exit

6) Create App Deployment

>Note: Check app pod running in which worker node then enable node-port number in security group in-bound rules.